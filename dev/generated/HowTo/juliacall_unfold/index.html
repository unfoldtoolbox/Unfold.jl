<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>üêç Calling Unfold.jl directly from Python ¬∑ Unfold.jl Timeseries Analysis &amp; Deconvolution</title><meta name="title" content="üêç Calling Unfold.jl directly from Python ¬∑ Unfold.jl Timeseries Analysis &amp; Deconvolution"/><meta property="og:title" content="üêç Calling Unfold.jl directly from Python ¬∑ Unfold.jl Timeseries Analysis &amp; Deconvolution"/><meta property="twitter:title" content="üêç Calling Unfold.jl directly from Python ¬∑ Unfold.jl Timeseries Analysis &amp; Deconvolution"/><meta name="description" content="Documentation for Unfold.jl Timeseries Analysis &amp; Deconvolution."/><meta property="og:description" content="Documentation for Unfold.jl Timeseries Analysis &amp; Deconvolution."/><meta property="twitter:description" content="Documentation for Unfold.jl Timeseries Analysis &amp; Deconvolution."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Unfold.jl Timeseries Analysis &amp; Deconvolution</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Unfold Documentation</a></li><li><a class="tocitem" href="../../../installation/">Installing Julia + Unfold.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../../tutorials/lm_mu/">Mass univariate LM</a></li><li><a class="tocitem" href="../../../tutorials/lm_overlap/">LM overlap correction</a></li><li><a class="tocitem" href="../../../tutorials/lmm_mu/">Mass univariate Mixed Model</a></li><li><a class="tocitem" href="../../../tutorials/lmm_overlap/">LMM + overlap correction</a></li></ul></li><li><span class="tocitem">HowTo</span><ul><li><a class="tocitem" href="../../../HowTo/multiple_events/">Overlap: Multiple events</a></li><li><a class="tocitem" href="../../../HowTo/pymne/">Import EEG with üêç PyMNE.jl</a></li><li><a class="tocitem" href="../../../HowTo/standarderrors/">Standard errors</a></li><li><a class="tocitem" href="../../../HowTo/custom_solvers/">Alternative Solvers (Robust, GPU, B2B)</a></li><li class="is-active"><a class="tocitem" href>üêç Calling Unfold.jl directly from Python</a><ul class="internal"><li><a class="tocitem" href="#Quick-start"><span>Quick start</span></a></li><li><a class="tocitem" href="#Example:-Unfold-model-fitting-from-Python"><span>Example: Unfold model fitting from Python</span></a></li><li><a class="tocitem" href="#Important-limitations"><span>Important limitations</span></a></li></ul></li><li><a class="tocitem" href="../../../HowTo/lmm_pvalues/">P-values for mixedModels</a></li><li><a class="tocitem" href="../effects/">Marginal effects (focus on non-linear predictors)</a></li><li><a class="tocitem" href="../unfold_io/">Save and load Unfold models</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="../../../explanations/basisfunctions/">About basisfunctions</a></li><li><a class="tocitem" href="../../explanations/nonlinear_effects/">Non-Linear effects</a></li><li><a class="tocitem" href="../../explanations/window_length/">Window Length Effect</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../../references/extensions/">Overview of package extensions</a></li><li><a class="tocitem" href="../../../explanations/development/">Development environment</a></li><li><a class="tocitem" href="../../../references/types/">API: Types</a></li><li><a class="tocitem" href="../../../references/functions/">API: Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">HowTo</a></li><li class="is-active"><a href>üêç Calling Unfold.jl directly from Python</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>üêç Calling Unfold.jl directly from Python</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/Unfold.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/Unfold.jl/blob/main/docs/literate/HowTo/juliacall_unfold.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-Unfold.jl-from-Python"><a class="docs-heading-anchor" href="#Using-Unfold.jl-from-Python">Using Unfold.jl from Python</a><a id="Using-Unfold.jl-from-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Unfold.jl-from-Python" title="Permalink"></a></h1><p>it is straight forward to call Unfold from Python using <code>JuliaCall</code>.</p><h2 id="Quick-start"><a class="docs-heading-anchor" href="#Quick-start">Quick start</a><a id="Quick-start-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-start" title="Permalink"></a></h2><p>Create a Python environment and install JuliaCall.</p><pre><code class="language-bash hljs">pip install juliacall</code></pre><p>Create a Julia environment and install Unfold</p><pre><code class="language-python hljs"># Import the Julia package manager
from juliacall import Pkg as jlPkg

# Activate the environment in the current folder
jlPkg.activate(&quot;.&quot;)

# Install Unfold (in the activated environment)
jlPkg.add(&quot;Unfold&quot;)</code></pre><p>Import Julia&#39;s main module and Unfold</p><pre><code class="language-python hljs"># Import Julia&#39;s Main module
from juliacall import Main as jl

# Import Unfold
# The function seval() can be used to evaluate a piece of Julia code given as a string
jl.seval(&quot;using Unfold&quot;)
Unfold = jl.Unfold # simplify name</code></pre><p>Now you can use all Unfold functions as for example</p><pre><code class="language-python hljs">dummy_model = Unfold.UnfoldLinearModel(jl.Dict())</code></pre><h2 id="Example:-Unfold-model-fitting-from-Python"><a class="docs-heading-anchor" href="#Example:-Unfold-model-fitting-from-Python">Example: Unfold model fitting from Python</a><a id="Example:-Unfold-model-fitting-from-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-Unfold-model-fitting-from-Python" title="Permalink"></a></h2><p>In this <a href="https://github.com/unfoldtoolbox/Unfold.jl/blob/main/docs/src/HowTo/juliacall_unfold.ipynb">notebook</a>, you can find a more detailed example of how to use Unfold from Python to load data, fit an Unfold model and visualise the results in Python.</p><h2 id="Important-limitations"><a class="docs-heading-anchor" href="#Important-limitations">Important limitations</a><a id="Important-limitations-1"></a><a class="docs-heading-anchor-permalink" href="#Important-limitations" title="Permalink"></a></h2><p>Python doesnt not offer the full expressions that are available in Julia. So there are some things you need to give special attention:</p><p><strong><code>@formula</code></strong>: we havent found a way to call macros yet, even though we think it should be possible. For now please use <code>f = jl.seval(&quot;@formula(0~1+my+cool+design)&quot;)</code>. Later versions might support something like <code>f = @formula(&quot;0~1+my+cool+design)&quot;</code> directly</p><p><strong>Specifying the design</strong>: Since Unfold 0.7 we officially switched to the</p><pre><code class="language-julia hljs">[&quot;eventtypeA&quot;=&gt;(formula,basisfunction),
&quot;eventtypeB&quot;=&gt;(otherformula,otherbasisfunction)]</code></pre><p>Array-based syntax, from a Dict-based syntax. Unfortunately, <code>=&gt;</code> (a pair) is not supported in Python and one needs to do some rewriting:</p><pre><code class="language-python hljs">jl.convert(jl.Pair,(formula,basisfunction))</code></pre><p>which makes the code less readable. We are thinking of ways to remedy this - but right now there is now way around. For now, it is also possible to use the old syntax e.g. in python</p><pre><code class="language-python hljs">{&quot;eventtypeA&quot;=&gt;(formula,basisfunction),&quot;eventtypeB&quot;=&gt;(otherformula,otherbasisfunction)}</code></pre><p>which is clearly easier to read :)</p><p><strong><code>UnfoldSim.design</code></strong>: we need a <code>Dict</code> with a <code>Symbol</code> , one has to do something like <code>condition_dict_jl = {convert(jl.Symbol,&quot;condA&quot;):[&quot;car&quot;, &quot;face&quot;]}</code> to do so. We will [try to allow strings}(https://github.com/unfoldtoolbox/UnfoldSim.jl/issues/96) here as well, removing this constraint.</p><p>When preprocessing your raw data through MNE Python, take the following into consideration: The <a href="https://mne.tools/stable/generated/mne.io.Raw.html">Raw object</a> contains the <a href="https://mne.tools/stable/documentation/glossary.html#term-first_samp">first_samp</a> attribute which is an integer representing the number of time samples that passed between the onset of the hardware acquisition system and the time when data recording started. The Raw data doesn&#39;t include these time samples, meaning that the first sample is the beginning of the data aquisition. From the Raw object you can obtain an events array from the annotations through <a href="https://mne.tools/stable/generated/mne.events_from_annotations.html">mne.events<em>from</em>annotations()</a>. The events array, however, does include first<em>samp, meaning that the annotated events in events array don&#39;t match the Raw object anymore. Alternatively, it might be easier to convert the annotations to a pandas dataframe directly (`to</em>data<em>frame()`), or even better, load the &quot;*</em>events.tsv&quot; from a BIDS dataset. In the latter case, all columns will be preserved, which MNE&#39;s read_annotation drops.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../../HowTo/custom_solvers/">¬´ Alternative Solvers (Robust, GPU, B2B)</a><a class="docs-footer-nextpage" href="../../../HowTo/lmm_pvalues/">P-values for mixedModels ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 13 August 2024 08:54">Tuesday 13 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
